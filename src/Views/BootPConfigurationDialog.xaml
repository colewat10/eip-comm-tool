<Window x:Class="EtherNetIPTool.Views.BootPConfigurationDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="BootP Request Detected"
        Width="450" Height="350"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        WindowStyle="SingleBorderWindow"
        Background="#F0F0F0">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Request Info -->
            <RowDefinition Height="10"/>   <!-- Spacing -->
            <RowDefinition Height="Auto"/> <!-- Configuration -->
            <RowDefinition Height="10"/>   <!-- Spacing -->
            <RowDefinition Height="Auto"/> <!-- DHCP Disable Checkbox -->
            <RowDefinition Height="*"/>    <!-- Spacer -->
            <RowDefinition Height="Auto"/> <!-- Buttons -->
        </Grid.RowDefinitions>

        <!-- Request Information (REQ-3.6.3-001, REQ-3.6.3-002) -->
        <GroupBox Grid.Row="0" Header="Request Information" Padding="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- MAC Address -->
                <TextBlock Grid.Row="0" Grid.Column="0" Text="MAC Address:" Margin="0,2,10,2" FontWeight="Bold"/>
                <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding MacAddress}" Margin="0,2" FontFamily="Consolas"/>

                <!-- Timestamp -->
                <TextBlock Grid.Row="1" Grid.Column="0" Text="Received:" Margin="0,2,10,2" FontWeight="Bold"/>
                <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Timestamp}" Margin="0,2" FontFamily="Consolas"/>

                <!-- Transaction ID -->
                <TextBlock Grid.Row="2" Grid.Column="0" Text="Transaction ID:" Margin="0,2,10,2" FontWeight="Bold"/>
                <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding TransactionId}" Margin="0,2" FontFamily="Consolas"/>
            </Grid>
        </GroupBox>

        <!-- Configuration Input (REQ-3.6.3-003) -->
        <GroupBox Grid.Row="2" Header="Configuration" Padding="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/> <!-- IP Address -->
                    <RowDefinition Height="Auto"/> <!-- IP Error -->
                    <RowDefinition Height="Auto"/> <!-- Subnet Mask -->
                    <RowDefinition Height="Auto"/> <!-- Subnet Error -->
                    <RowDefinition Height="Auto"/> <!-- Gateway -->
                    <RowDefinition Height="Auto"/> <!-- Gateway Error -->
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="110"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- IP Address (Required) -->
                <TextBlock Grid.Row="0" Grid.Column="0" Text="IP Address:*" Margin="0,5,10,2" VerticalAlignment="Center" FontWeight="Bold"/>
                <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Margin="0,5,0,2">
                    <TextBox Width="40" MaxLength="3" TextAlignment="Center" Text="{Binding IpAddress1, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="." Margin="2,0" VerticalAlignment="Center"/>
                    <TextBox Width="40" MaxLength="3" TextAlignment="Center" Text="{Binding IpAddress2, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="." Margin="2,0" VerticalAlignment="Center"/>
                    <TextBox Width="40" MaxLength="3" TextAlignment="Center" Text="{Binding IpAddress3, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="." Margin="2,0" VerticalAlignment="Center"/>
                    <TextBox Width="40" MaxLength="3" TextAlignment="Center" Text="{Binding IpAddress4, UpdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>

                <!-- IP Validation Error -->
                <TextBlock Grid.Row="1" Grid.Column="1"
                           Text="{Binding IpValidationError}"
                           Foreground="Red"
                           FontSize="10"
                           Margin="0,0,0,2"
                           TextWrapping="Wrap"
                           Visibility="{Binding IpValidationError, Converter={StaticResource StringToVisibilityConverter}}"/>

                <!-- Subnet Mask (Required) -->
                <TextBlock Grid.Row="2" Grid.Column="0" Text="Subnet Mask:*" Margin="0,5,10,2" VerticalAlignment="Center" FontWeight="Bold"/>
                <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal" Margin="0,5,0,2">
                    <TextBox Width="40" MaxLength="3" TextAlignment="Center" Text="{Binding SubnetMask1, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="." Margin="2,0" VerticalAlignment="Center"/>
                    <TextBox Width="40" MaxLength="3" TextAlignment="Center" Text="{Binding SubnetMask2, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="." Margin="2,0" VerticalAlignment="Center"/>
                    <TextBox Width="40" MaxLength="3" TextAlignment="Center" Text="{Binding SubnetMask3, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="." Margin="2,0" VerticalAlignment="Center"/>
                    <TextBox Width="40" MaxLength="3" TextAlignment="Center" Text="{Binding SubnetMask4, UpdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>

                <!-- Subnet Validation Error -->
                <TextBlock Grid.Row="3" Grid.Column="1"
                           Text="{Binding SubnetValidationError}"
                           Foreground="Red"
                           FontSize="10"
                           Margin="0,0,0,2"
                           TextWrapping="Wrap"
                           Visibility="{Binding SubnetValidationError, Converter={StaticResource StringToVisibilityConverter}}"/>

                <!-- Gateway (Optional) -->
                <TextBlock Grid.Row="4" Grid.Column="0" Text="Gateway:" Margin="0,5,10,2" VerticalAlignment="Center"/>
                <StackPanel Grid.Row="4" Grid.Column="1" Orientation="Horizontal" Margin="0,5,0,2">
                    <TextBox Width="40" MaxLength="3" TextAlignment="Center" Text="{Binding Gateway1, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="." Margin="2,0" VerticalAlignment="Center"/>
                    <TextBox Width="40" MaxLength="3" TextAlignment="Center" Text="{Binding Gateway2, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="." Margin="2,0" VerticalAlignment="Center"/>
                    <TextBox Width="40" MaxLength="3" TextAlignment="Center" Text="{Binding Gateway3, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="." Margin="2,0" VerticalAlignment="Center"/>
                    <TextBox Width="40" MaxLength="3" TextAlignment="Center" Text="{Binding Gateway4, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="(optional)" Margin="10,0,0,0" VerticalAlignment="Center" Foreground="Gray" FontSize="10"/>
                </StackPanel>

                <!-- Gateway Validation Error -->
                <TextBlock Grid.Row="5" Grid.Column="1"
                           Text="{Binding GatewayValidationError}"
                           Foreground="Red"
                           FontSize="10"
                           Margin="0,0,0,2"
                           TextWrapping="Wrap"
                           Visibility="{Binding GatewayValidationError, Converter={StaticResource StringToVisibilityConverter}}"/>
            </Grid>
        </GroupBox>

        <!-- DHCP Disable Checkbox (REQ-3.6.3-005) -->
        <CheckBox Grid.Row="4"
                  Content="Disable DHCP mode after assignment (set to static IP)"
                  IsChecked="{Binding DisableDhcpAfterAssignment}"
                  Margin="5,0,5,0"
                  ToolTip="Sends CIP command to configure device for static IP mode after assignment"/>

        <!-- Required Fields Note -->
        <TextBlock Grid.Row="5"
                   Text="* Required fields"
                   FontSize="10"
                   Foreground="Gray"
                   Margin="5,5,5,0"
                   VerticalAlignment="Bottom"/>

        <!-- Action Buttons (REQ-3.6.3-006, REQ-3.6.3-007) -->
        <StackPanel Grid.Row="6" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="Assign &amp; Configure"
                    Width="140"
                    Height="26"
                    IsDefault="True"
                    Command="{Binding AssignCommand}"
                    ToolTip="Send BootP reply and configure device with specified settings"/>
            <Button Content="Ignore Request"
                    Width="120"
                    Height="26"
                    Margin="10,0,0,0"
                    IsCancel="True"
                    Command="{Binding IgnoreCommand}"
                    ToolTip="Discard this request without taking action"/>
        </StackPanel>
    </Grid>
</Window>
